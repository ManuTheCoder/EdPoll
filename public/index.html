<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp">
    <meta name="viewport" content="width=device-width">
    <title>EdPoll</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@materializecss/materialize@1.1.0-alpha/dist/css/materialize.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="manifest" href="manifest.webmanifest">
    <meta name="theme-color" content="#fff">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com/" >
    <link rel="dns-prefetch" href="https://i.ibb.co/" >
    <link rel="dns-prefetch" href="https://image.flaticon.com/" >
    <link rel="dns-prefetch" href="https://beta.manuthecoder.repl.co/" >

    <link
          href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet"
          />
    <link
          rel="shortcut icon"
          href="https://image.flaticon.com/icons/png/512/5455/5455405.png"
          />
    <meta name="title" content="EdPoll">
    <meta name="description" content="EdPoll is a polling app for both schools and offices! Create website">
    <meta property="og:url" content="https://edpoll.ga">
    <meta property="og:title" content="EdPoll">
    <meta property="og:description" content="EdPoll is a polling app for both schools and offices! Create your own poll now - No signup required!">
    <meta property="og:image" content="https://i.ibb.co/4jQj7tF/s.png">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
      .card {border-radius: 4px;background: rgba(255,255,255,.3)!important}
      .waves-effect:not(.waves-light, ._darkTheme .waves-effect) .waves-ripple {
        background: rgba(0, 0, 0, .2) !important
      }
      .btn-flat:hover {background: rgba(200,200,200,.2)!important}
      .header {height: 100vh;
        /*background-attachment:fixed;*/
        background-image: url("data:image/svg+xml,%0A%3Csvg id='visual' viewBox='0 0 3840 2160' width='3840' height='2160' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'%3E%3Crect x='0' y='0' width='3840' height='2160' fill='%23fff'%3E%3C/rect%3E%3Cdefs%3E%3ClinearGradient id='grad1_0' x1='43.8%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='14.444444444444446%25' stop-color='%23ffffff' stop-opacity='1'%3E%3C/stop%3E%3Cstop offset='85.55555555555554%25' stop-color='%23ffffff' stop-opacity='1'%3E%3C/stop%3E%3C/linearGradient%3E%3C/defs%3E%3Cdefs%3E%3ClinearGradient id='grad2_0' x1='0%25' y1='0%25' x2='56.3%25' y2='100%25'%3E%3Cstop offset='14.444444444444446%25' stop-color='%23ffffff' stop-opacity='1'%3E%3C/stop%3E%3Cstop offset='85.55555555555554%25' stop-color='%23ffffff' stop-opacity='1'%3E%3C/stop%3E%3C/linearGradient%3E%3C/defs%3E%3Cg transform='translate(3840, 0)'%3E%3Cpath d='M0 1404C-193.9 1280.2 -387.8 1156.3 -609 1054.8C-830.2 953.3 -1078.8 874.1 -1215.9 702C-1353 529.9 -1378.5 265 -1404 0L0 0Z' fill='%23FBAE3C'%3E%3C/path%3E%3C/g%3E%3Cg transform='translate(0, 2160)'%3E%3Cpath d='M0 -1404C264 -1377.9 528.1 -1351.9 702 -1215.9C875.9 -1079.9 959.8 -834 1061.7 -613C1163.7 -392 1283.9 -196 1404 0L0 0Z' fill='%23FBAE3C'%3E%3C/path%3E%3C/g%3E%3C/svg%3E");
        background-size:cover}
      ._darkTheme .waves-ripple {background: rgba(255, 255, 255, .2) !important}
      .waves-light .waves-ripple {background: rgba(255, 255, 255, .2) !important}
      .card {width:100%}
      nav a,nav a i {
        color: #505050 !important;
        background: transparent !important;
      }
      body {
        font-family: 'Nunito', sans-serif;
        /*background: rgb(240,240,255)*/
      }
      nav {
        box-shadow: none !important;
        border-bottom: 1px solid rgba(0,0,0,0.1);
        background: rgba(0,0,0,.05);
        z-index: 9999;
        backdrop-filter: blur(10px);
        position: fixed;
        top: 0
      }
      .waves-ripple {
        transition: transform .8s cubic-bezier(0.4, 0, 0.2, 1), opacity .4s !important
      }
      @keyframes bg {0% {background-size:300%} 20% {background-size:300%} 50% {background-size:100%} 100% {background-size: 100%}}
      @media only screen and (min-width: 992px) {
        .header {animation: bg 5s forwards;background-position: center;}
      }
    </style>
  </head>
  <body>
    <nav>
      <ul>
        <li><a href="/">EdPoll</a></li>
      </ul>
      <ul class="right">
        <a href="/add" class="btn btn-flat waves-effect">Create!</a>
      </ul>
    </nav>
    <div class="header valign-wrapper">
      <div class="container">
        <div class="center">
          <h1>
            Class decisions never got easier!
          </h1>
          <p>
            Edpoll is a polling app with many features, such as Wordclouds, Polls, and Bulletin boards;
          </p>
          <a href="/add" class="btn btn-flat waves-effect">Create your own poll!</a>
          <a href="//joinmypoll.ml" class="btn btn-flat waves-effect">Join a poll!</a>
        </div>
      </div>
    </div>
    <div class="container">
      <br>
      <h3 class="center">
        <b>Features</b>
      </h3><br>
      <div class="row">
        <div class="col s12 m4">
          <div class="card">
            <div class="card-content center">
              <i class="material-icons-round" style="font-size: 35px;">poll</i>
              <br>
              <b>Poll</b>
              <br>
              Simple multiple-choice poll.
            </div>
          </div>
        </div>
        <div class="col s12 m4">
          <div class="card">
            <div class="card-content center">
              <i class="material-icons-round" style="font-size: 35px;">dashboard</i>
              <p>
                <b>Bulletin Board</b>
                <br>
                Let students write their own responses
              </p>
            </div>
          </div>
        </div>
        <div class="col s12 m4">
          <div class="card">
            <div class="card-content center">
              <i class="material-icons-round" style="font-size: 35px;">article</i>
              <p>
                <b>WordCloud</b>
                <br>
                Organize responses into a wordcloud.
              </p>
            </div>
          </div>
        </div>

      </div>

      <div class="row">
        <div class="col s12 m4">
          <div class="card">
            <div class="card-content center">
              <i class="material-icons-round" style="font-size: 35px;">password</i>
              <br>
              <b>Profanity Filter</b>
              <br>
              Profanity and spam filter included
            </div>
          </div>
        </div>
        <div class="col s12 m4">
          <div class="card">
            <div class="card-content center">
              <i class="material-icons-round" style="font-size: 35px;">local_offer</i>
              <p>
                <b>It's Free!</b>
                <br>
                Our app is free of cost! No signup required!
              </p>
            </div>
          </div>
        </div>
        <div class="col s12 m4">
          <div class="card">
            <div class="card-content center">
              <i class="material-icons-round" style="font-size: 35px;">gpp_good</i>
              <p>
                <b>Secure</b>
                <br>
                HTTPS and encrypted polls!
              </p>
            </div>
          </div>
        </div>

      </div>
    </div>
    <br>
    <h3 class="center">
      <b>All Polls</b>
    </h3><br>
    <div class="container">
      <div class="row" id="polls">
        <center>
          <div class="preloader-wrapper small active">
            <div class="spinner-layer spinner-green-only">
              <div class="circle-clipper left">
                <div class="circle"></div>
              </div><div class="gap-patch">
              <div class="circle"></div>
              </div><div class="circle-clipper right">
              <div class="circle"></div>
              </div>
            </div>
          </div>
        </center>
      </div>
    </div>
    <footer class="page-footer blue" style="padding: 0 !important">
      <div class="footer-copyright">
        <div class="container">
          Â© Copyright 2021 All rights reserved
          <a
             class="grey-text text-lighten-4 right"
             href="https://manuthecoder.ml"
             >A swag app by Manu!</a
            >
        </div>
      </div>
      <div class="add-button"></div>

    </footer>
    <script src="https://cdn.jsdelivr.net/npm/@materializecss/materialize@1.1.0-alpha/dist/js/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/ManuTheCoder/JS-Essentials/essentials.min.js"></script>
    <script src="script.js"></script>
    <script>
      function char_convert(str) {
        str = str.toString();
        str = str.replace(/&/g, "&amp;");
        str = str.replace(/>/g, "&gt;");
        str = str.replace(/</g, "&lt;");
        str = str.replace(/"/g, "&quot;");
        str = str.replace(/'/g, "&#039;");
        return str;
      }

      window.addEventListener("load", () => {

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            const json = JSON.parse(this.responseText)
            document.getElementById("polls").innerHTML = "";
            $(document).ready(function(){
              $("#search").on("keyup", function() {
                var value = $(this).val().toLowerCase();
                if(value.trim() == "") {
                  $("#polls .col.s12").addClass("m4")
                }
                $("#polls .col.s12").filter(function() {
                  $(this).removeClass("m4")
                  $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
              });
            });
            document.getElementById("polls").innerHTML = `<div class="chips1 col s12"></div>`
            // [...new Set(array)]
            json.forEach((data, key) => {
              var cat = "";
              if(data.categories) {
                data.categories.forEach(d => {
                  cat += `<div class="chip">${char_convert(d)}</div>`
                })
              }
              // document.getElementById("polls").getElementsByClassName("chips1")[0].innerHTML += `${cat}`
              document.getElementById("polls").innerHTML += `<div class="col s12"> <div class="card waves-effect" onclick="window.location = './v/${key}/'" tabindex="0" onkeyup="if(event.keyCode == 13) {window.location = './v/${key}/'}"> <div class="card-content"> <b><h5>${char_convert(data.title)}</h5></b> <p>${char_convert((data.date?data.date:""))}</p> <br> <p>${cat}</p> </div> </div> </div>`;
            })
          }
        };
        xhttp.open("GET", "./database/polls.json", true);
        xhttp.setRequestHeader("Authorization", "Bearer {{DBTOKEN}}");
        xhttp.send();
      });
    </script>
  </body>
</html>