<!DOCTYPE html>
<html>
  <head>
		<title>Home</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@materializecss/materialize@1.0.0/dist/css/materialize.min.css"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      rel="shortcut icon"
      href="https://image.flaticon.com/icons/png/512/5455/5455405.png"
    />
		<script 	src="https://beta.manuthecoder.repl.co/socket.io/socket.io.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://poll.manuthecoder.repl.co/css/main.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>
  <body style="margin-top: 55px !important">
    <nav class="white" style="z-index: 9 !important">
      <ul>
        <li>
          <a href="https://beta.manuthecoder.repl.co">EdPoll</a>
        </li>
      </ul>
      <ul class="right">
        <li>
          <a
            href="javascript:void(0)"
            class="btn blue-grey darken-4 waves-effect waves-light"
            onclick="dark_mode()"
            style="
              padding: 0 7px !important;
              color: white !important;
              border-radius: 5px;
              margin-right: 0 !important;
            "
            ><i class="material-icons">dark_mode</i></a
          >
          <a
            href="https://edpoll.ga/add"
            class="btn blue waves-effect waves-light"
            style="color: white !important; border-radius: 5px"
            >Create</a
          >
        </li>
      </ul>
    </nav>
    <style>
      .dark_mode body {
        background: #212121 !important;
        color: white;
      }
      .dark_mode .card {
        background: rgba(255, 255, 255, 0.1) !important;
      }
      .dark_mode .waves-effect .waves-ripple {
        background: rgba(255, 255, 255, 0.3) !important;
      }
      .dark_mode nav,
      .dark_mode footer {
        background: #303030 !important;
        box-shadow: none !important;
      }
      .dark_mode nav a {
        color: #fff !important;
      }
      .dark_mode input {
        color: white !important;
      }
      * {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
      }
    </style>
    <script defer>
      function dark_mode() {
        if (document.documentElement.classList.contains("dark_mode")) {
          document.documentElement.classList.remove("dark_mode");
          localStorage.setItem("dark_mode", "false");
        } else {
          document.documentElement.classList.add("dark_mode");
          localStorage.setItem("dark_mode", "true");
        }
      }
      window.addEventListener("load", () => {
        if (
          localStorage.getItem("dark_mode") &&
          localStorage.getItem("dark_mode") == "true"
        ) {
          document.documentElement.classList.add("dark_mode");
        }
      });
    </script>
    <div
      class="hero-image"
      style="
         background: linear-gradient(
            0deg,
            rgba(0, 0, 0, 0.3),
            rgba(0, 0, 0, 0.3)
          ),
          url(https://wallpaperaccess.com/full/3480785.jpg);
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
        backdrop-filter: blur(1px);
      "
    >
      <div class="container white-text center" style="padding: 20vh 0">
        <h2 style="font-size: 50px; color: white !important">
          Smart &amp; easy group decision making
        </h2>
        <p>An immersive polling experience for both schools and offices!</p>
        <a
          class="waves-effect waves-light"
          style="
            color: white;
            min-width: 200px;
            backdrop-filter: blur(5px);
            background: transparent;
            padding: 10px;
            border: 2px solid #0d47a1;
            border-radius: 10px;
          "
          href="https://edpoll.ga/add"
          >Create your own poll!</a
        >
      </div>
    </div>
    <div class="container">
      <br />
      <h3>
        <b>Recent</b>
      </h3>
      <div class="row" id="polls"></div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/@materializecss/materialize@1.0.0/dist/js/materialize.min.js"
      type="text/javascript"
    ></script>
    <footer class="page-footer blue" style="padding: 0 !important">
      <div class="footer-copyright">
        <div class="container">
          Â© Copyright 2021 All rights reserved
          <a
            class="grey-text text-lighten-4 right"
            href="https://manuthecoder.ml"
            >A swag app by Manu!</a
          >
        </div>
      </div>
    </footer>
    <script>
			// const socket = io("wss://" + window.location.hostname);
      // socket.emit("message", "hi");
			window.onerror = function(msg, url, linenumber) {
    alert('Error message: '+msg+'\nURL: '+url+'\nLine Number: '+linenumber);
    return true;
}
      
      window.addEventListener("load", () => {
			
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
						const json = JSON.parse(this.responseText)
						json.forEach((data, key) => {
            document.getElementById("polls").innerHTML += `<div class="col s12 m4">
					<div class="card waves-effect" onclick="window.location = './v/?id=${key}'">
						<div class="card-content">
						<b><h5>${data.title}</h5></b>
						<p>${data.date}</p>
						
						<br>
						</div>
					</div>
				</div>`;
						})
          }
        };
        xhttp.open("GET", "./database/polls.json", true);
        xhttp.send();
      });
    </script>
  </body>
</html>